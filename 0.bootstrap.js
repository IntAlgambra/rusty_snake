(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[0],{

/***/ "../pkg/snakewasm.js":
/*!***************************!*\
  !*** ../pkg/snakewasm.js ***!
  \***************************/
/*! exports provided: Game, __wbg_random_eb1fab8e1db2d9d1, __wbindgen_throw */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./snakewasm_bg.wasm */ \"../pkg/snakewasm_bg.wasm\");\n/* harmony import */ var _snakewasm_bg_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./snakewasm_bg.js */ \"../pkg/snakewasm_bg.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Game\", function() { return _snakewasm_bg_js__WEBPACK_IMPORTED_MODULE_1__[\"Game\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"__wbg_random_eb1fab8e1db2d9d1\", function() { return _snakewasm_bg_js__WEBPACK_IMPORTED_MODULE_1__[\"__wbg_random_eb1fab8e1db2d9d1\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_throw\", function() { return _snakewasm_bg_js__WEBPACK_IMPORTED_MODULE_1__[\"__wbindgen_throw\"]; });\n\n\n\n\n//# sourceURL=webpack:///../pkg/snakewasm.js?");

/***/ }),

/***/ "../pkg/snakewasm_bg.js":
/*!******************************!*\
  !*** ../pkg/snakewasm_bg.js ***!
  \******************************/
/*! exports provided: Game, __wbg_random_eb1fab8e1db2d9d1, __wbindgen_throw */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Game\", function() { return Game; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_random_eb1fab8e1db2d9d1\", function() { return __wbg_random_eb1fab8e1db2d9d1; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_throw\", function() { return __wbindgen_throw; });\n/* harmony import */ var _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./snakewasm_bg.wasm */ \"../pkg/snakewasm_bg.wasm\");\n\n\nconst lTextDecoder = typeof TextDecoder === 'undefined' ? (0, module.require)('util').TextDecoder : TextDecoder;\n\nlet cachedTextDecoder = new lTextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nlet cachegetUint8Memory0 = null;\nfunction getUint8Memory0() {\n    if (cachegetUint8Memory0 === null || cachegetUint8Memory0.buffer !== _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer) {\n        cachegetUint8Memory0 = new Uint8Array(_snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer);\n    }\n    return cachegetUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nfunction notDefined(what) { return () => { throw new Error(`${what} is not defined`); }; }\n/**\n*/\nclass Game {\n\n    static __wrap(ptr) {\n        const obj = Object.create(Game.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    free() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_game_free\"](ptr);\n    }\n    /**\n    * @param {number} x\n    * @param {number} y\n    * @returns {Game}\n    */\n    static new(x, y) {\n        var ret = _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_new\"](x, y);\n        return Game.__wrap(ret);\n    }\n    /**\n    */\n    turn_snake_up() {\n        _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_turn_snake_up\"](this.ptr);\n    }\n    /**\n    */\n    turn_snake_left() {\n        _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_turn_snake_left\"](this.ptr);\n    }\n    /**\n    */\n    turn_snake_right() {\n        _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_turn_snake_right\"](this.ptr);\n    }\n    /**\n    */\n    turn_snake_down() {\n        _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_turn_snake_down\"](this.ptr);\n    }\n    /**\n    */\n    tick() {\n        _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_tick\"](this.ptr);\n    }\n    /**\n    * @returns {number}\n    */\n    pointer_to_snake() {\n        var ret = _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_pointer_to_snake\"](this.ptr);\n        return ret;\n    }\n    /**\n    * @returns {number}\n    */\n    snake_data_len() {\n        var ret = _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_snake_data_len\"](this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    apple_x() {\n        var ret = _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_apple_x\"](this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    apple_y() {\n        var ret = _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_apple_y\"](this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    head_direction() {\n        var ret = _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_head_direction\"](this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    tail_direction() {\n        var ret = _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_tail_direction\"](this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {boolean}\n    */\n    is_growing() {\n        var ret = _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_is_growing\"](this.ptr);\n        return ret !== 0;\n    }\n    /**\n    * @returns {number}\n    */\n    head_x() {\n        var ret = _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_head_x\"](this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    head_y() {\n        var ret = _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_head_y\"](this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    tail_x() {\n        var ret = _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_tail_x\"](this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    tail_y() {\n        var ret = _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_tail_y\"](this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {boolean}\n    */\n    is_stopped() {\n        var ret = _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_is_stopped\"](this.ptr);\n        return ret !== 0;\n    }\n    /**\n    * @returns {number}\n    */\n    score() {\n        var ret = _snakewasm_bg_wasm__WEBPACK_IMPORTED_MODULE_0__[\"game_score\"](this.ptr);\n        return ret >>> 0;\n    }\n}\n\nconst __wbg_random_eb1fab8e1db2d9d1 = typeof Math.random == 'function' ? Math.random : notDefined('Math.random');\n\nconst __wbindgen_throw = function(arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1));\n};\n\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../www/node_modules/webpack/buildin/harmony-module.js */ \"./node_modules/webpack/buildin/harmony-module.js\")(module)))\n\n//# sourceURL=webpack:///../pkg/snakewasm_bg.js?");

/***/ }),

/***/ "../pkg/snakewasm_bg.wasm":
/*!********************************!*\
  !*** ../pkg/snakewasm_bg.wasm ***!
  \********************************/
/*! exports provided: memory, __wbg_game_free, game_new, game_turn_snake_up, game_turn_snake_left, game_turn_snake_right, game_turn_snake_down, game_tick, game_pointer_to_snake, game_snake_data_len, game_apple_x, game_apple_y, game_head_direction, game_tail_direction, game_is_growing, game_head_x, game_head_y, game_tail_x, game_tail_y, game_is_stopped, game_score */
/***/ (function(module, exports, __webpack_require__) {

eval("\"use strict\";\n// Instantiate WebAssembly module\nvar wasmExports = __webpack_require__.w[module.i];\n__webpack_require__.r(exports);\n// export exports from WebAssembly module\nfor(var name in wasmExports) if(name != \"__webpack_init__\") exports[name] = wasmExports[name];\n// exec imports from WebAssembly module (for esm order)\n/* harmony import */ var m0 = __webpack_require__(/*! ./snippets/snakewasm-f33a10f343c28bc4/helpers.js */ \"../pkg/snippets/snakewasm-f33a10f343c28bc4/helpers.js\");\n\n/* harmony import */ var m1 = __webpack_require__(/*! ./snakewasm_bg.js */ \"../pkg/snakewasm_bg.js\");\n\n\n// exec wasm module\nwasmExports[\"__webpack_init__\"]()\n\n//# sourceURL=webpack:///../pkg/snakewasm_bg.wasm?");

/***/ }),

/***/ "../pkg/snippets/snakewasm-f33a10f343c28bc4/helpers.js":
/*!*************************************************************!*\
  !*** ../pkg/snippets/snakewasm-f33a10f343c28bc4/helpers.js ***!
  \*************************************************************/
/*! exports provided: play_eating_sound, play_gameover_sound */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"play_eating_sound\", function() { return play_eating_sound; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"play_gameover_sound\", function() { return play_gameover_sound; });\nconst actionAudio = document.querySelector(\"#actionSound\");\r\nconst gameOverAudio = document.querySelector(\"#gameoverSound\");\r\n\r\nfunction play_eating_sound(stuff) {\r\n    actionAudio.play()\r\n}\r\n\r\nfunction play_gameover_sound() {\r\n    gameOverAudio.play();\r\n}\n\n//# sourceURL=webpack:///../pkg/snippets/snakewasm-f33a10f343c28bc4/helpers.js?");

/***/ }),

/***/ "./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var wasm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! wasm */ \"../pkg/snakewasm.js\");\n/* harmony import */ var wasm_snakewasm_bg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! wasm/snakewasm_bg */ \"../pkg/snakewasm_bg.wasm\");\n\r\n\r\n\r\n//colors and stuff\r\nconst FIELD_COLOR = \"#212529\";\r\nconst SNAKE_COLOR = \"#ff7777\";\r\nconst APPLE_COLOR = \"#ff7777\";\r\n// game field dimensions (in cells)\r\nconst GAME_FIELD_WIDTH = 24;\r\nconst GAME_FIELD_HEIGHT = 16;\r\n\r\n// cell size in pixels\r\nconst CELL_SIZE = 20;\r\n\r\n// snake speed in cells/sec\r\nconst SNAKE_SPEED = 5;\r\n// time to render moving to one cell\r\nconst TIME_TO_RENDER = 1000/SNAKE_SPEED;\r\n\r\n// some globals (it's bad practise, though)\r\nconst canvas = document.querySelector(\"#game\");\r\ncanvas.width = GAME_FIELD_WIDTH * CELL_SIZE;\r\ncanvas.height = GAME_FIELD_HEIGHT * CELL_SIZE;\r\nconst ctx = canvas.getContext(\"2d\");\r\nctx.fillStyle = FIELD_COLOR;\r\nctx.fillRect(0, 0, GAME_FIELD_WIDTH*CELL_SIZE, GAME_FIELD_HEIGHT*CELL_SIZE);\r\nconst score = document.querySelector(\"#score\");\r\nconst playBtn = document.querySelector(\"#playBtn\")\r\n\r\n\r\n\r\n// Let's add some event listeners to control snake via arrow keys\r\ndocument.addEventListener(\"keydown\", (event) => {\r\n    if (event.key == \"ArrowDown\") {\r\n        game.turn_snake_up();\r\n    } else if (event.key == \"ArrowUp\") {\r\n        game.turn_snake_down();\r\n    } else if (event.key == \"ArrowRight\") {\r\n        game.turn_snake_right();\r\n    } else if (event.key == \"ArrowLeft\") {\r\n        game.turn_snake_left();\r\n    }\r\n})\r\n\r\n\r\n// Function render apple on canvas\r\nconst renderApple = (ctx) => {\r\n    const apple_x = game.apple_x()*CELL_SIZE;\r\n    const apple_y = game.apple_y()*CELL_SIZE;\r\n    ctx.fillStyle = APPLE_COLOR;\r\n    ctx.fillRect(apple_x, apple_y, CELL_SIZE, CELL_SIZE);\r\n}\r\n\r\n// Function renders snake at the end of every animation\r\n// Without animation we need only fire this functhion\r\n// every game cycle\r\nconst renderGameCycle = (ctx) => {\r\n    ctx.fillStyle = FIELD_COLOR;\r\n    ctx.fillRect(0, 0, GAME_FIELD_WIDTH*CELL_SIZE, GAME_FIELD_HEIGHT*CELL_SIZE);\r\n    ctx.fillStyle = SNAKE_COLOR;\r\n    const pointer = game.pointer_to_snake();\r\n    const dataLen = game.snake_data_len();\r\n    const snakeBuf = new Uint32Array(wasm_snakewasm_bg__WEBPACK_IMPORTED_MODULE_1__[\"memory\"].buffer, pointer, dataLen);\r\n    const snake = snakeBuf.reduce((acc, item, index) => {\r\n        if (index % 2 === 0) {\r\n            acc.push([item, snakeBuf[index+1]])\r\n        }\r\n        return acc;\r\n    }, [])\r\n    snake.forEach((cell) => {\r\n        ctx.fillRect(cell[0]*CELL_SIZE, cell[1]*CELL_SIZE, CELL_SIZE, CELL_SIZE);\r\n    } )\r\n}\r\n\r\n\r\n// Function rendering shake head smooth animathion from one\r\n// game state to another \r\nconst renderHeadAnimation = (\r\n    ctx,\r\n    headX,\r\n    headY,\r\n    direction,\r\n    progress\r\n) => {\r\n    const x = headX * CELL_SIZE;\r\n    const y = headY * CELL_SIZE;\r\n    const step = Math.floor(progress * CELL_SIZE);\r\n    ctx.fillStyle = SNAKE_COLOR;\r\n    if (direction === 2) {\r\n        ctx.fillRect(x, y-step, CELL_SIZE, step);\r\n    } else if (direction === 1) {\r\n        ctx.fillRect(x+CELL_SIZE, y, step, CELL_SIZE);\r\n    } else if (direction === 0) {\r\n        ctx.fillRect(x, y+CELL_SIZE, CELL_SIZE, step);\r\n    } else if (direction === 3) {\r\n        ctx.fillRect(x-step, y, step, CELL_SIZE);\r\n    }\r\n}\r\n\r\n// Function renders snake tail animathion from one game state to another\r\nconst renderTailAnimation = (\r\n    ctx,\r\n    tailX,\r\n    tailY,\r\n    direction,\r\n    progress\r\n) => {\r\n    const x = tailX * CELL_SIZE;\r\n    const y = tailY * CELL_SIZE;\r\n    const step = Math.floor(progress * CELL_SIZE);\r\n    ctx.fillStyle = FIELD_COLOR;\r\n    if (direction === 2) {\r\n        ctx.fillRect(x, y+CELL_SIZE-step, CELL_SIZE, step);\r\n    } else if (direction === 1) {\r\n        ctx.fillRect(x, y, step, CELL_SIZE);\r\n    } else if (direction === 0) {\r\n        ctx.fillRect(x, y, CELL_SIZE, step);\r\n    } else if (direction === 3) {\r\n        ctx.fillRect(x+CELL_SIZE-step, y, step, CELL_SIZE);\r\n    }\r\n\r\n}\r\n\r\n// main function, launching game cycle\r\nconst run = (ctx) => {\r\n    game = wasm__WEBPACK_IMPORTED_MODULE_0__[\"Game\"].new(GAME_FIELD_WIDTH, GAME_FIELD_HEIGHT)\r\n    renderGameCycle(ctx);\r\n    let tailX = game.tail_x();\r\n    let tailY = game.tail_y();\r\n    let headX = game.head_x();\r\n    let headY = game.head_y();\r\n    game.tick();\r\n    let headDirection = game.head_direction();\r\n    let tailDicrection = game.tail_direction();\r\n    let time = performance.now();\r\n    requestAnimationFrame(function drawFrame(current) {\r\n        const frameProgress = (current - time) / TIME_TO_RENDER;\r\n        if (frameProgress > 1) {\r\n            score.textContent = `score: ${game.score()}`\r\n            renderGameCycle(ctx);\r\n            tailX = game.tail_x();\r\n            tailY = game.tail_y();\r\n            headX = game.head_x();\r\n            headY = game.head_y();\r\n            headDirection = game.head_direction();\r\n            tailDicrection = game.tail_direction();\r\n            game.tick();\r\n            renderApple(ctx);\r\n            if (game.is_stopped()) {\r\n                playBtn.classList.toggle(\"inactiveBtn\")\r\n                return;\r\n            }\r\n            time = current;\r\n            requestAnimationFrame(drawFrame)\r\n        } else {\r\n            renderHeadAnimation(\r\n                ctx,\r\n                headX,\r\n                headY,\r\n                headDirection,\r\n                frameProgress\r\n            )\r\n            renderTailAnimation(\r\n                ctx,\r\n                tailX,\r\n                tailY,\r\n                tailDicrection,\r\n                frameProgress\r\n            )\r\n            requestAnimationFrame(drawFrame)\r\n        }\r\n    })\r\n}\r\n\r\nplayBtn.addEventListener(\"click\", () => {\r\n    run(ctx)\r\n    playBtn.classList.toggle(\"inactiveBtn\")\r\n})\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./index.js?");

/***/ }),

/***/ "./node_modules/webpack/buildin/harmony-module.js":
/*!*******************************************!*\
  !*** (webpack)/buildin/harmony-module.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n//# sourceURL=webpack:///(webpack)/buildin/harmony-module.js?");

/***/ })

}]);